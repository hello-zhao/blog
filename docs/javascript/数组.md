# 数组

## flat
::: tip 语法
@param {Number} depth 指定要提取嵌套数组的结构深度，默认值为 1。可选值：Infinity <br>
@return {Arrary} 一个包含将数组与子数组中所有元素的新数组。<br>
let newArray = arr.flat(depth)
:::

栗子：
``` js
const arr = [1, 2, 3, 4, [5, 6, 7]];
console.log(arr.flat(Infinity)); // [1, 2, 3, 4, 5, 6, 7]
```
上面的栗子比较理想，我们实际需求中数据结构会更复杂些，这时我们就要实现自己的flat方法

``` js
const arr = [1, {children: [2, 3]}, 4,  {children: [5, 6]}];
function flat(items) {
  return items.reduce((prev, current) => {
    return prev.concat(
      Array.isArray(current.children) ? [] : current,
      Array.isArray(current.children) ? flat(current.children) : []
    );
  }, []);
}
console.log(flat(arr)); // [1, 2, 3, 4, 5, 6]
```


## reduce
```js
Array.prototype.myReduce = function (func, init) {
    if (!Array.isArray(this)) {
        throw new Error('不是数组')
    }

    let accumulator, currentValue, currentIndex

    if (init) {
      accumulator = init
      currentIndex = 0
    } else {
      accumulator = this[0]
      currentIndex = 1
    }

    for (let i = currentIndex; i < this.length; i++) {
      accumulator = func(accumulator, this[i], i, this)
    }
    return accumulator
}

const demo1 = [1, 2, 3].myReduce(function(acc, act, index, array){
  return acc + act
})

const demo2 = [1, 2, 3].myReduce(function(acc, act, index, array){
  acc.push(act)
  return acc
}, [])
```
